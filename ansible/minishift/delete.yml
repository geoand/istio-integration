- name: Check if minishift is running
  command: minishift status
  register: ps_state
  ignore_errors: yes

- debug:
    msg: "Shutting down minishift..."
  when: '"Running" not in ps_state.stdout'

- name: Shutdown minishift
  command: minishift stop
  when: '"Running" not in ps_state.stdout'

# - name: Stop playbook, if running and not restart
#   assert:
#     that: true == false
#   when: ps_state.stdout == 'Running' and not minishift_restart

- name: Deleting minishift
  command: minishift delete --force
  ignore_errors: true
  become: yes

# - name: Remove ~/.minishift
#   file:
#     path: ~/.minishift
#     state: absent
#   when: minishift_delete
#   become: yes